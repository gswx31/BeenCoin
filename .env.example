# .env.example - 개선 버전
# 데이터베이스
DATABASE_URL=sqlite:///./beencoin.db

# JWT 보안
SECRET_KEY=your-secret-key-change-in-production-please-use-long-random-string
ACCESS_TOKEN_EXPIRE_MINUTES=1440

# Binance API (Public API 사용시 불필요, 주석 처리)
# BINANCE_API_KEY=your-binance-api-key
# BINANCE_API_SECRET=your-binance-api-secret

# Redis (선택사항 - Celery 사용시)
# REDIS_URL=redis://localhost:6379/0
# CELERY_BROKER_URL=redis://localhost:6379/0
# CELERY_RESULT_BACKEND=redis://localhost:6379/0

# 거래 설정
INITIAL_BALANCE=1000000
SUPPORTED_SYMBOLS=BTCUSDT,ETHUSDT,BNBUSDT,ADAUSDT

# 서버 설정
API_HOST=0.0.0.0
API_PORT=8000
CORS_ORIGINS=http://localhost:3000,http://localhost:8000

# 로깅
LOG_LEVEL=INFO


# ================================
# client/.env.example
# ================================
REACT_APP_API_URL=http://localhost:8000
REACT_APP_WS_URL=ws://localhost:8000


# ================================
# app/core/config.py - 개선 버전
# ================================
try:
    from pydantic_settings import BaseSettings
except ImportError:
    from pydantic import BaseSettings

from typing import Optional, List
from dotenv import load_dotenv
import os

load_dotenv()

class Settings(BaseSettings):
    # API 설정
    API_V1_STR: str = "/api/v1"
    PROJECT_NAME: str = "BeenCoin API"
    API_HOST: str = os.getenv("API_HOST", "0.0.0.0")
    API_PORT: int = int(os.getenv("API_PORT", "8000"))
    
    # 데이터베이스 (통일된 SQLite 사용)
    DATABASE_URL: str = os.getenv("DATABASE_URL", "sqlite:///./beencoin.db")
    
    # JWT 설정
    SECRET_KEY: str = os.getenv(
        "SECRET_KEY", 
        "dev-secret-key-change-in-production"
    )
    ALGORITHM: str = "HS256"
    ACCESS_TOKEN_EXPIRE_MINUTES: int = int(
        os.getenv("ACCESS_TOKEN_EXPIRE_MINUTES", "1440")
    )
    
    # Binance API (Public API는 키 불필요)
    BINANCE_API_URL: str = "https://api.binance.com/api/v3"
    
    # CORS 설정
    CORS_ORIGINS: List[str] = os.getenv(
        "CORS_ORIGINS", 
        "http://localhost:3000,http://localhost:8000"
    ).split(",")
    
    # 거래 설정
    INITIAL_BALANCE: float = float(os.getenv("INITIAL_BALANCE", "1000000"))
    SUPPORTED_SYMBOLS: List[str] = os.getenv(
        "SUPPORTED_SYMBOLS",
        "BTCUSDT,ETHUSDT,BNBUSDT,ADAUSDT"
    ).split(",")
    
    # 로깅
    LOG_LEVEL: str = os.getenv("LOG_LEVEL", "INFO")
    
    class Config:
        case_sensitive = True
        env_file = ".env"

settings = Settings()

# 설정 출력 (디버깅용)
if settings.LOG_LEVEL == "DEBUG":
    print("=" * 60)
    print("⚙️  BeenCoin Configuration")
    print("=" * 60)
    print(f"Database: {settings.DATABASE_URL}")
    print(f"Initial Balance: ${settings.INITIAL_BALANCE:,.0f}")
    print(f"Supported Coins: {', '.join(settings.SUPPORTED_SYMBOLS)}")
    print(f"Token Expiry: {settings.ACCESS_TOKEN_EXPIRE_MINUTES} minutes")
    print(f"CORS Origins: {settings.CORS_ORIGINS}")
    print("=" * 60)